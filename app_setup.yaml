- name: Copy desktop launcher
  template:
    src: converging.desktop
    dest: "/home/{{ custom_username }}/Desktop/{{ item.name }}.desktop"
    owner: "{{custom_username}}"
    group: users
    mode: "0744"

- name: Make desktop launcher Trusted
  shell: dbus-launch gio set "/home/{{ custom_username }}/Desktop/{{ item.name }}.desktop" "metadata::trusted" true
  become_user: "{{custom_username}}"


- name: Pull default App Docker image
  docker_image:
    name: "{{docker_registry}}/{{item.image}}"
    source: pull
  become_user: "{{custom_username}}"

- name: Run the image with rocker to generate cache and speed up first run
  shell: rocker --x11 --user {{item.rocker_args}} {{docker_registry}}/{{item.image}} echo First run of app container
